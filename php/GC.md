# GC

1. 引用计数
	- refcount = 0 

	- 缺点：
		- 循环引用解决不了，此时放入垃圾缓冲区

2. 当变量refcount减少后大于0  php会将其放入垃圾缓冲区，等缓冲区满了(10000)这个值后，统一进行处理。

3. 垃圾回收只处理数组和对象

4. 垃圾缓冲区是一个双向链表，遍历缓冲区(深度优先遍历)，全部成员减1，如果refcount=0 则引用来自于自身成员，就可以被回收掉。反之则不是垃圾，需要从缓冲区移出去。

	- roots 开始遍历，value标记灰色 GC_GREY,深度优先遍历 value refcount减去1 并且标记为灰色
	- 重复遍历 value是否为0, 0标识为垃圾，标记为白色 GC_WHITE,如果不是0 再加1 ，标识为黑色
	- 再次遍历缓冲区 移除非白色节点，这样链表中全部为真正的垃圾，最后垃圾清理掉
